{{- if .Values.gateway.secrets.create }}
# =============================================================================
# Gateway Secrets
# =============================================================================
# Contains sensitive configuration that should not be in ConfigMap.
# 
# Usage options:
#   1. Set values directly (not recommended for production):
#      gateway.secrets.llmApiKey: "your-api-key"
#
#   2. Use existing secret (recommended):
#      gateway.secrets.create: false
#      gateway.secrets.existingSecret: "my-existing-secret"
#
#   3. Use external secrets operator (enterprise):
#      Create ExternalSecret CR that syncs to this secret name
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Release.Name }}-secrets
  labels:
    app: voice-gateway
    app.kubernetes.io/name: voice-gateway
    app.kubernetes.io/instance: {{ .Release.Name }}
type: Opaque
stringData:
  {{- if .Values.gateway.secrets.llmApiKey }}
  # API key for LLM service (if required by your NIM deployment)
  LLM_API_KEY: {{ .Values.gateway.secrets.llmApiKey | quote }}
  {{- end }}
  {{- if .Values.gateway.secrets.ngcApiKey }}
  # NGC API key (for accessing NVIDIA services)
  NGC_API_KEY: {{ .Values.gateway.secrets.ngcApiKey | quote }}
  {{- end }}
  {{- range $key, $value := .Values.gateway.secrets.extra }}
  # Custom secret: {{ $key }}
  {{ $key }}: {{ $value | quote }}
  {{- end }}
{{- end }}

