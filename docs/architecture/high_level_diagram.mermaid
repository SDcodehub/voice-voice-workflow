graph TD
    Client["User Client<br/>(Web/Mobile/SIP)"]
    
    subgraph K8s_Cluster["Kubernetes Cluster (GPU Enabled)"]
        Ingress["Ingress Controller<br/>(Nginx/Traefik)"]
        
        subgraph Voice_Workflow["Voice Workflow Namespace"]
            Gateway["Voice Gateway / Orchestrator<br/>(Python/Go gRPC)"]
            
            subgraph ASR_Service["ASR Service (Riva)"]
                RivaASR["Riva ASR Server"]
                ModelASR["Hindi ASR Model"]
            end
            
            subgraph LLM_Service["LLM Service"]
                LLM["LLM Engine<br/>(NIM/vLLM)"]
                ModelLLM["Hindi/Multilingual LLM"]
            end
            
            subgraph TTS_Service["TTS Service (Riva)"]
                RivaTTS["Riva TTS Server"]
                ModelTTS["Hindi TTS Model"]
            end
        end
    end
    
    Client -- "WebSocket / gRPC (Audio Stream)" --> Ingress
    Ingress --> Gateway
    
    Gateway -- "gRPC Stream (Audio)" --> RivaASR
    RivaASR -- "gRPC Stream (Transcript)" --> Gateway
    
    Gateway -- "gRPC/REST (Text Context)" --> LLM
    LLM -- "gRPC/SSE (Text Response)" --> Gateway
    
    Gateway -- "gRPC (Text)" --> RivaTTS
    RivaTTS -- "gRPC (Audio)" --> Gateway
    
    Gateway -- "WebSocket (Audio)" --> Client

    style K8s_Cluster fill:#f9f,stroke:#333,stroke-width:2px
    style Voice_Workflow fill:#e1f5fe,stroke:#333,stroke-width:1px

